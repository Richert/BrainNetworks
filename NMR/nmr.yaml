%YAML 1.2
---

bloch:
  base: OperatorTemplate
  equations:
    - "d/dt * mx = gamma*B_0*my + x_in"
    - "d/dt * my = -gamma*B_0*mx + y_in"
  variables:
    mx:
      default: output(1.0)
    my:
      default: variable(-1.0)
    gamma:
      default: 0.1
    B_0:
      default: 0.5
    x_in:
      default: input
    y_in:
      default: input

coupling:
  base: OperatorTemplate
  equations:
    - "f = 1/sqrt((mx_1 - mx_2)**2 + (my_1 - my_2)**2)"
  variables:
    f:
      default: output
    mx_1:
      default: input
    mx_2:
      default: input
    my_1:
      default: input
    my_2:
      default: input

nucleus:
  base: NodeTemplate
  operators:
    - bloch

single_nucleus:
  base: CircuitTemplate
  nodes:
    n1: nucleus

two_nuclei:
  base: CircuitTemplate
  nodes:
    n1: nucleus
    n2: nucleus
  edges:
    - [n1/bloch/]